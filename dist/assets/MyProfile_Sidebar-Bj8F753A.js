import{u as I,r as s,j as e,E as w,q as C,J as U,S as L,a as _}from"./index-DT4VApSY.js";import{a as k}from"./index-BPSlSkxe.js";import{B as D}from"./index-HFm3bB9z.js";const J=()=>{const c=I(),[o,d]=s.useState(!1),[x,g]=s.useState(""),[m,i]=s.useState(null),[F,p]=s.useState(null),[f,h]=s.useState(!0),[b,u]=s.useState(!1),r=t=>{c(t),window.scrollTo({top:0,behavior:"instant"})};s.useEffect(()=>{const t=localStorage.getItem("loginDetails")?JSON.parse(localStorage.getItem("loginDetails")):null;if(t&&d(!0),t){const{profile_image:a,id:l}=t;i(a),g(l)}setTimeout(()=>{h(!1)},1e3)},[]);const j=()=>{L.fire({title:"Are you sure?",text:"You want to logout?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Logout"}).then(t=>{t.isConfirmed&&(localStorage.removeItem("loginDetails"),c("/login"))})},y=async t=>{const a=t.target.files[0];if(a){u(!0),i(URL.createObjectURL(a)),p(a);try{const l=new FormData;l.append("image_1",a);const N=await _.post(`https://backoffice.innerpece.com/api/v1/update-profile/${x}`,l,{headers:{"Content-Type":"multipart/form-data"}});localStorage.setItem("loginDetails",JSON.stringify(N.data.user));const n=localStorage.getItem("loginDetails")?JSON.parse(localStorage.getItem("loginDetails")):null;if(n&&d(!0),n){const{profile_image:S,id:v}=n;i(S),g(v)}}catch(l){console.log(l)}finally{u(!1)}}};return e.jsxs("div",{className:"flex flex-col md:sticky h-fit top-0 p-3 bg-white rounded-lg shadow-md",children:[f&&e.jsx("div",{className:"absolute inset-0 flex justify-center items-center bg-white opacity-75 z-10",children:e.jsx("div",{className:"spinner-border animate-spin border-4 border-t-4 border-blue-600 rounded-full w-12 h-12"})}),e.jsxs("div",{className:"h-56 flex flex-col items-center w-full rounded-lg relative",children:[e.jsx("img",{src:m?`https://backoffice.innerpece.com/${m}`:w,alt:"userImage",className:"w-full h-full object-contain object-center rounded-lg"}),e.jsx("label",{htmlFor:"changeimage",className:`font-medium mt-1 cursor-pointer text-gray-500 hover:text-gray-600 ${!o&&"opacity-0 hidden"}`,children:"Change Image"}),e.jsx("input",{disabled:!o,type:"file",id:"changeimage",accept:"image/*",onChange:y,className:"opacity-0"}),b&&e.jsx("p",{className:"text-sm text-blue-600 font-medium mt-2",children:"Uploading..."})]}),e.jsxs("div",{className:"flex flex-col mt-12 ",children:[e.jsxs("div",{onClick:()=>r("/profile"),className:"flex items-center px-4 py-3 rounded-lg hover:bg-blue-100 cursor-pointer gap-3",children:[e.jsx(C,{className:"text-xl text-blue-600"}),e.jsx("p",{className:"text-gray-700 font-medium",children:"Profile"})]}),e.jsxs("div",{onClick:()=>r("/wishlist"),className:"flex items-center px-4 py-3 rounded-lg hover:bg-blue-100 cursor-pointer gap-3",children:[e.jsx(k,{className:"text-2xl text-red-500"}),e.jsx("p",{className:"text-gray-700 font-medium",children:"Wishlist"})]}),e.jsxs("div",{onClick:()=>r("/enquiries"),className:"flex items-center px-4 py-3 rounded-lg hover:bg-blue-100 cursor-pointer gap-3",children:[e.jsx(D,{className:"text-xl text-green-500"}),e.jsx("p",{className:"text-gray-700 font-medium",children:"Enquiries"})]}),o&&e.jsxs("div",{onClick:j,className:"flex items-center px-4 py-3 rounded-lg hover:bg-blue-100 cursor-pointer gap-3",children:[e.jsx(U,{className:"text-2xl text-gray-700"}),e.jsx("p",{className:"text-gray-700 font-medium",children:"Logout"})]})]})]})};export{J as default};
