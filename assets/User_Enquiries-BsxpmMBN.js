import{r as t,u as w,j as e,w as _,H as k,h as D,a as S}from"./index-Bfd94zVt.js";import C from"./MyProfile_Sidebar-C2b1M0Pn.js";import"./index-Chki4vnO.js";import"./index-BB32D_eW.js";const M=()=>{const[i,c]=t.useState(""),[E,h]=t.useState(""),p=localStorage.getItem("loginid"),[r,u]=t.useState([]),[g,d]=t.useState(!1),[s,m]=t.useState(null),[x,n]=t.useState(!0),b=w();t.useEffect(()=>{document.title="Enquiries - Innerpece";const a=setTimeout(()=>{n(!1)},200);return()=>clearTimeout(a)},[]);const j=()=>{b("/login"),window.scrollTo({top:0,behavior:"instant"})};t.useEffect(()=>{const a=localStorage.getItem("loginDetails")?JSON.parse(localStorage.getItem("loginDetails")):null;if(a){c(!0);const{email:l}=a;h(l)}else c(!1)},[]),t.useEffect(()=>{(async()=>{const l=localStorage.getItem("loginDetails")?JSON.parse(localStorage.getItem("loginDetails")):null;try{n(!0);const o={email:l.email},y={Authorization:`Bearer ${p}`};let v=await S.post("https://backoffice.innerpece.com/api/getEnquiryDetailsByEmail",o,{headers:y});u(v.data.data)}catch(o){console.log(o)}finally{n(!1)}})()},[]);const f=a=>{m(r[a]),d(!0)},N=()=>{d(!1),m(null)};return x?e.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-md bg-transparent",children:e.jsx("div",{className:"w-16 h-16 border-4 border-gray-300 border-t-blue-500 rounded-full animate-spin"})}):e.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[e.jsxs("div",{onClick:()=>window.open("https://wa.me/6384131642"),className:"fixed whatsapp z-50 bottom-2 right-2 cursor-pointer flex items-center group",children:[e.jsx("div",{className:"text-black opacity-0 scale-90 translate-x-5 group-hover:opacity-100 group-hover:scale-100 group-hover:translate-x-0 bg-white px-2 py-1 rounded-md shadow-md ml-2 transition-all duration-300",children:e.jsx("p",{children:"Whatsapp Enquiry"})}),e.jsx("img",{src:_,className:"h-10 w-10  transition-all duration-500"})]}),e.jsx(k,{}),e.jsxs("div",{className:"flex flex-col md:flex-row pt-10 pb-4 px-5 md:px-10 gap-5",children:[e.jsx("div",{className:"basis-1/12",children:e.jsx(C,{})}),i&&e.jsx("div",{className:"basis-full shadow-md md:basis-3/4 overflow-x-auto bg-white text-black px-6 rounded-md p-6",children:x?e.jsx("div",{className:"flex justify-center items-center h-[50vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-blue-500 border-opacity-80"})}):r.length>0?e.jsxs("table",{className:"min-w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left text-sm font-semibold text-gray-600",children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"S.no"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Date"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Title"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"Action"})]})}),e.jsx("tbody",{children:r.slice().map((a,l)=>e.jsxs("tr",{className:"hover:bg-gray-100",children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2 text-sm",children:l+1}),e.jsx("td",{className:"border border-gray-300 px-4 py-2 text-sm",children:a.created_at.split("T")[0]}),e.jsxs("td",{className:"border border-gray-300 px-4 py-2 text-sm",children:[a.program_title,a.stay_title]}),e.jsx("td",{className:"border border-gray-300 px-4 py-2 text-center",children:e.jsx("button",{onClick:()=>f(l),className:"rounded bg-blue-500 px-3 py-1 text-white hover:bg-blue-600 focus:outline-none focus:ring focus:ring-blue-300",children:"View"})})]},l))})]}):e.jsx("div",{className:"h-[50vh] flex items-center justify-center",children:e.jsx("p",{className:"text-xl text-center w-full font-medium",children:"No Enquiries Found"})})}),i===!1&&e.jsx("div",{className:"flex justify-center w-full mt-10 h-screen",children:e.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6",children:["Please"," ",e.jsx("span",{onClick:j,className:"text-blue-600 cursor-pointer hover:underline",children:"Login"})," ","to view your enquiries"]})})]}),g&&s&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center backdrop-blur bg-black/20",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 w-11/12 max-w-lg shadow-lg",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-6 text-center",children:[s.program_title,s.stay_title]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Name:"})," ",s.name]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Email:"})," ",s.email]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Phone:"})," ",s.phone]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"My Location:"})," ",s.location]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Days to Travel:"})," ",s.days?s.days:s.no_of_days]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Destination:"})," ",s.travel_destination?s.travel_destination:s.location]}),s.budget_per_head&&e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Budget per Head:"})," ",s.budget_per_head]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Total Count:"})," ",s.total_count]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Male Count:"})," ",s.male_count]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Female Count:"})," ",s.female_count]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Child Count:"})," ",s.child_count]}),s.travel_date&&e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Travel Date:"})," ",s.travel_date]}),s.rooms_count&&e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Rooms Required:"})," ",s.rooms_count]}),s.checkin_date&&e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Checkin Date:"})," ",s.checkin_date]}),s.checkout_date&&e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Checkout Date:"})," ",s.checkout_date]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Cab Needed:"})," ",s.cab_need?s.cab_need:s.cab]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Comments:"})," ",s.comments]})]}),e.jsx("button",{onClick:N,className:"mt-6 w-fit px-5 bg-red-500 text-white py-3 rounded-lg font-medium hover:bg-red-600 transition duration-300",children:"Close"})]})}),e.jsx(D,{})]})};export{M as default};
