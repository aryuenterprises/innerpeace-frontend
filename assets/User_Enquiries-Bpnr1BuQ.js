import{r as l,u as E,j as e,G as S,H as D,L,M as q,J as C,a as I}from"./index-Dahchei9.js";import T from"./MyProfile_Sidebar-C26VTvyR.js";import"./index-CWqJ6FsZ.js";const P=()=>{const[u,p]=l.useState(""),[A,y]=l.useState(""),j=localStorage.getItem("loginid"),[o,v]=l.useState([]),[d,b]=l.useState(!1),[s,h]=l.useState(null),[x,m]=l.useState(!0);l.useEffect(()=>(d?document.body.classList.add("overflow-hidden"):document.body.classList.remove("overflow-hidden"),()=>document.body.classList.remove("overflow-hidden")),[d]);const N=E();l.useEffect(()=>{document.title="Enquiries - Innerpece";const t=setTimeout(()=>{m(!1)},200);return()=>clearTimeout(t)},[]);const w=()=>{N("/login"),window.scrollTo({top:0,behavior:"instant"})};l.useEffect(()=>{const t=localStorage.getItem("loginDetails")?JSON.parse(localStorage.getItem("loginDetails")):null;if(t){p(!0);const{email:a}=t;y(a)}else p(!1)},[]),l.useEffect(()=>{(async()=>{const a=localStorage.getItem("loginDetails")?JSON.parse(localStorage.getItem("loginDetails")):null;try{m(!0);const r={email:a.email},g={Authorization:`Bearer ${j}`};let _=await I.post("https://backoffice.innerpece.com/api/getEnquiryDetailsByEmail",r,{headers:g});v(_.data.data)}catch(r){console.log(r)}finally{m(!1)}})()},[]);const k=t=>{h(o[t]),b(!0)},f=()=>{b(!1),h(null)};if(x)return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center backdrop-blur-md bg-transparent",children:e.jsx("div",{className:"w-16 h-16 border-4 border-gray-300 border-t-blue-500 rounded-full animate-spin"})});const i=({label:t,value:a})=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-tight",children:t}),e.jsx("span",{className:"text-sm font-bold text-gray-800",children:a})]}),n=({icon:t,label:a,count:r,color:g})=>e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-bold shadow-sm ${g}`,children:[e.jsx("span",{children:t}),e.jsxs("span",{children:[a,": ",r||0]})]}),c=({label:t,value:a,isLink:r})=>e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("p",{className:"text-[9px] sm:text-[10px] uppercase font-bold text-blue-600 tracking-tight",children:t}),e.jsx("p",{className:`text-gray-900 font-semibold text-base sm:text-lg break-all ${r?"underline decoration-blue-200":""}`,children:a||"N/A"})]});return e.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[e.jsx(S,{}),e.jsx(D,{}),e.jsxs("div",{className:"flex gap-1 sm:gap-2  px-2 py-0.5  items-center",children:[e.jsx(L,{to:"/",children:e.jsx("p",{className:"text-xs sm:text-sm",children:"Home"})}),e.jsx(q,{className:"text-xl"}),e.jsx("p",{className:"text-blue-500 font-medium sm:font-semibold",children:"Enquiries"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row pt-10 pb-4 px-5 md:px-10 gap-5",children:[e.jsx("div",{className:"basis-1/12",children:e.jsx(T,{})}),u&&e.jsxs("div",{className:"basis-full md:basis-3/4 bg-white shadow-xl rounded-2xl overflow-hidden border border-gray-100",children:[e.jsxs("div",{className:"p-6 border-b border-gray-50 flex justify-between items-center bg-white",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"My Enquiries"}),!x&&o.length>0&&e.jsxs("span",{className:"text-xs font-semibold bg-blue-50 text-blue-600 px-3 py-1 rounded-full",children:[o.length," Records"]})]}),x?e.jsxs("div",{className:"flex flex-col justify-center items-center h-[50vh] space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-4 border-blue-100 border-t-blue-500"}),e.jsx("p",{className:"text-sm text-gray-400 animate-pulse",children:"Fetching data..."})]}):o.length>0?e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-[600px] w-full text-left border-separate border-spacing-0",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50/50",children:[e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-gray-500 uppercase tracking-wider border-b border-gray-100",children:"S.No"}),e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-gray-500 uppercase tracking-wider border-b border-gray-100",children:"Date"}),e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-gray-500 uppercase tracking-wider border-b border-gray-100",children:"Title"}),e.jsx("th",{className:"px-6 py-4 text-xs font-bold text-gray-500 uppercase tracking-wider border-b border-gray-100 text-center",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-50",children:o.slice().map((t,a)=>e.jsxs("tr",{className:"group hover:bg-blue-50/30 transition-colors duration-200",children:[e.jsx("td",{className:"px-6 py-5 text-sm text-gray-400 font-medium",children:String(a+1).padStart(2,"0")}),e.jsx("td",{className:"px-6 py-5 text-sm text-gray-600 whitespace-nowrap",children:e.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded text-xs",children:t.created_at.split("T")[0]})}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-800 group-hover:text-blue-600 transition-colors",children:t.program_title||t.stay_title}),e.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-tight",children:t.program_title?"Program Enquiry":"Stay Enquiry"})]})}),e.jsx("td",{className:"px-6 py-5 text-center",children:e.jsx("button",{onClick:()=>k(a),className:"inline-flex items-center justify-center rounded-lg bg-gray-900 px-5 py-2 text-xs font-bold text-white hover:bg-blue-600 shadow-sm active:scale-95 transition-all",children:"View"})})]},a))})]}),e.jsx("div",{className:"md:hidden flex items-center justify-center space-x-2 py-3 bg-gray-50/50 text-[10px] text-gray-400 italic",children:e.jsx("span",{children:"‚Üê Swipe to view more ‚Üí"})})]}):e.jsxs("div",{className:"h-[50vh] flex flex-col items-center justify-center space-y-3",children:[e.jsx("div",{className:"bg-gray-50 p-4 rounded-full",children:e.jsx("svg",{className:"w-8 h-8 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),e.jsx("p",{className:"text-lg text-gray-500 font-medium",children:"No Enquiries Found"})]})]}),u===!1&&e.jsx("div",{className:"flex justify-center w-full mt-10 h-screen",children:e.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6",children:["Please"," ",e.jsx("span",{onClick:w,className:"text-blue-600 cursor-pointer hover:underline",children:"Login"})," ","to view your enquiries"]})})]}),d&&s&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center p-0 sm:p-4",children:[e.jsx("div",{className:"absolute inset-0 backdrop-blur-md bg-black/60 transition-opacity",onClick:f}),e.jsxs("div",{className:"relative bg-white rounded-t-3xl sm:rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in fade-in slide-in-from-bottom-10 sm:zoom-in duration-300 max-h-[95vh] flex flex-col",children:[e.jsx("div",{className:"w-12 h-1.5 bg-gray-300 rounded-full mx-auto mt-3 mb-1 sm:hidden"}),e.jsxs("div",{className:"bg-gray-900 px-5 py-5 sm:px-8 sm:py-6",children:[e.jsx("h2",{className:"text-lg md:text-2xl font-bold text-white leading-tight break-words",children:s.program_title||s.stay_title}),e.jsx("p",{className:"text-gray-400 text-[10px] uppercase tracking-widest mt-1 font-bold",children:"Enquiry Details"})]}),e.jsxs("div",{className:"p-5 sm:p-8 overflow-y-auto custom-scrollbar flex-1",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5 sm:gap-6 mb-8",children:[e.jsx(c,{label:"Traveler Name",value:s.name}),e.jsx(c,{label:"Email Address",value:s.email,isLink:!0}),e.jsx(c,{label:"Phone Number",value:s.phone}),e.jsx(c,{label:"Home Location",value:s.location})]}),e.jsx("hr",{className:"border-gray-100 mb-6 sm:mb-8"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6 bg-gray-50 p-4 sm:p-6 rounded-xl border border-gray-100",children:[e.jsx(i,{label:"Destination",value:s.travel_destination||s.location}),e.jsx(i,{label:"Duration",value:`${s.days||s.no_of_days} Days`}),e.jsx(i,{label:"Travel Date",value:s.travel_date||s.checkin_date||"N/A"}),e.jsx(i,{label:"Cab",value:s.cab_need||s.cab||"No"}),s.budget_per_head&&e.jsx(i,{label:"Budget/Head",value:s.budget_per_head}),s.rooms_count&&e.jsx(i,{label:"Rooms",value:s.rooms_count})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("p",{className:"text-[10px] uppercase font-bold text-gray-400 mb-3 tracking-widest text-center sm:text-left",children:"Passenger Breakdown"}),e.jsxs("div",{className:"flex flex-wrap justify-center sm:justify-start gap-2 sm:gap-3",children:[e.jsx(n,{icon:"üë•",label:"Total",count:s.total_count,color:"bg-blue-100 text-blue-700"}),e.jsx(n,{icon:"‚ôÇ",label:"Male",count:s.male_count,color:"bg-gray-100 text-gray-700"}),e.jsx(n,{icon:"‚ôÄ",label:"Female",count:s.female_count,color:"bg-gray-100 text-gray-700"}),e.jsx(n,{icon:"üë∂",label:"Child",count:s.child_count,color:"bg-gray-100 text-gray-700"})]})]}),s.comments&&e.jsxs("div",{className:"mt-8 bg-blue-50/50 p-4 rounded-lg border-l-4 border-blue-500",children:[e.jsx("p",{className:"text-[10px] font-bold text-blue-800 uppercase mb-1",children:"Additional Comments"}),e.jsxs("p",{className:"text-gray-700 text-sm leading-relaxed italic",children:['"',s.comments,'"']})]})]}),e.jsxs("div",{className:"px-5 py-4 sm:px-8 bg-gray-50 border-t border-gray-100",children:[e.jsx("button",{onClick:f,className:"w-full sm:w-auto float-none sm:float-right px-8 py-3 bg-white border border-gray-300 text-gray-700 rounded-xl font-bold hover:bg-gray-50 active:scale-95 transition-all shadow-sm text-sm",children:"Close Preview"}),e.jsx("div",{className:"clear-both"})]})]})]}),e.jsx(C,{})]})};export{P as default};
